# Auspex Protobuf RabbitMQ

Contains some initial test code to allow autogeneration of C# NuGet package from only .proto files.

## C# library

The library consists of some generic RabbitMQ connection code (using EasyNetQ) and the autogenerated Protobuf
message classes. The generation of the package is automated, so the package will be built with only specifying
the .proto files. This way only the .proto and some helper (project, rabbitmq connection, config, etc) files are 
required to be kept under source control.

### Building on windows

Make sure you have .net core installed (preview2 of tools are working).
If you want to build on windows, put your .proto files in the `src/proto/` directory. 
Then execute the `compile.ps1` powershell script in the `build/` directory (make sure the active dir is `build/`).

### Building on VSTS Build Host

The actual reason to have a powershell script is to be able to set up a build definition on VSTS.
Simply add a powershell step to a build defintion and point to the `compile.ps1` script.

### Building on Linux

As the C# library is built using .net core, building should be possible on linux too. 
Although untested, it should be fairly straightforward to convert the powershell script into a bash or other shell script.

### Known issues

- Versioning of the NuGet package. The assembly version should reflect some version info from the .proto files somehow.
Probably need to add some logic to the build script.